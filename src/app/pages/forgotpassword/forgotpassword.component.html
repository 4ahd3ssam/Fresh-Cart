@if(isActive) {
<div
    class="overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 flex justify-center items-center w-full h-[100vh] bg-opacity">
    <div class="relative p-4 w-full max-w-md max-h-full">
        <div class="relative bg-white shadow-sm dark:bg-gray-700">
            <div class="flex items-center justify-between p-4 md:p-5 border-b dark:border-gray-600 border-gray-200">
                <h3 class="text-xl font-semibold text-black dark:text-white">
                    @if(step == 1) {
                    Forgot Password
                    }
                    @else if (step == 2) {
                    Verify Code
                    }
                    @else if (step == 3) {
                    Reset Password
                    }
                </h3>
                <button type="button" (click)="closeModal()"
                    class="cursor-pointer end-2.5 text-gray-400 bg-transparent hover:bg-gray-200 hover:text-black rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white"
                    data-modal-hide="authentication-modal">
                    <svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none"
                        viewBox="0 0 14 14">
                        <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6" />
                    </svg>
                    <span class="sr-only">Close modal</span>
                </button>
            </div>
            <div class="p-4 md:p-5">
                @if (step == 1) {
                <form class="space-y-4" [formGroup]="forgotPasswordForm" (ngSubmit)="submitForgotPassword()">
                    <div>
                        <label for="email" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Your
                            email</label>
                        <input type="email" name="email" id="email" formControlName="email"
                            class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-sm focus:ring-black focus:border-black block w-full p-2.5 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white"
                            placeholder="name@gmail.com" required />
                    </div>
                    <button type="submit"
                        class="w-full text-white bg-black hover:bg-gray-800 focus:outline-none font-medium rounded-sm cursor-pointer text-sm px-5 py-2.5 text-center dark:bg-gray-950 dark:hover:bg-gray-600 transition">Send
                        Verify Code
                        @if(isLoadingSubmission) {
                        <i class="fa-solid fa-spinner fa-spin fa-spin-reverse ms-1"></i>
                        }
                    </button>
                    @if(errorSubmissionMsg){
                    <div id="alert-border-2"
                        class="flex items-center py-2 rounded-sm text-red-800 bg-red-50 dark:text-red-400 dark:bg-gray-800 dark:border-red-800"
                        role="alert">
                        <div class="ms-2 text-sm">
                            <p>{{errorSubmissionMsg}}</p>
                        </div>
                    </div>
                    }
                    @if(successSubmissionMsg){
                    <div id="alert-border-2"
                        class="flex items-center py-2 rounded-sm text-main-green bg-gray-100 dark:text-main-green dark:bg-gray-800"
                        role="alert">

                        <div class="ms-2 text-sm">
                            <p>{{successSubmissionMsg}}</p>
                        </div>
                    </div>
                    }
                </form>
                }
                @else if (step == 2) {
                <form class="space-y-4" [formGroup]="verifyCodeForm" (ngSubmit)="submitVerifyCode()">
                    <form class="max-w-sm mx-auto">
                        <div class="flex mb-2 space-x-2 rtl:space-x-reverse items-center justify-center">
                            <div>
                                <label for="digitOne" class="sr-only">First code</label>
                                <input type="text" id="digitOne" formControlName="digitOne" data-focus-input-init
                                    data-focus-input-prev="digitOne" data-focus-input-next="digitTwo"
                                    (keyup)="onKeyUp($event, 'digitOne', null, 'digitTwo')" (paste)="onPaste($event)"
                                    maxlength="1"
                                    class="w-12 h-12 text-center text-xl font-medium text-black border border-gray-300 focus:ring-2 focus:ring-black focus:border-black  rounded-sm">
                            </div>
                            <div>
                                <label for="digitTwo" class="sr-only">Second code</label>
                                <input type="text" id="digitTwo" formControlName="digitTwo" data-focus-input-init
                                    data-focus-input-prev="digitOne" data-focus-input-next="digitThree"
                                    (keyup)="onKeyUp($event, 'digitTwo', 'digitOne', 'digitThree')"
                                    (paste)="onPaste($event)" maxlength="1"
                                    class="w-12 h-12 text-center text-xl font-medium text-black border border-gray-300 focus:ring-2 focus:ring-black focus:border-black  rounded-sm">
                            </div>
                            <div>
                                <label for="digitThree" class="sr-only">Third code</label>
                                <input type="text" id="digitThree" formControlName="digitThree" data-focus-input-init
                                    data-focus-input-prev="digitTwo" data-focus-input-next="digitFour"
                                    (keyup)="onKeyUp($event, 'digitThree', 'digitTwo', 'digitFour')"
                                    (paste)="onPaste($event)" maxlength="1"
                                    class="w-12 h-12 text-center text-xl font-medium text-black border border-gray-300 focus:ring-2 focus:ring-black focus:border-black  rounded-sm">
                            </div>
                            <div>
                                <label for="digitFour" class="sr-only">Fourth code</label>
                                <input type="text" id="digitFour" formControlName="digitFour" data-focus-input-init
                                    data-focus-input-prev="digitThree" data-focus-input-next="digitFive"
                                    (keyup)="onKeyUp($event, 'digitFour', 'digitThree', 'digitFive')"
                                    (paste)="onPaste($event)" maxlength="1"
                                    class="w-12 h-12 text-center text-xl font-medium text-black border border-gray-300 focus:ring-2 focus:ring-black focus:border-black  rounded-sm">
                            </div>
                            <div>
                                <label for="digitFive" class="sr-only">Fifth code</label>
                                <input type="text" id="digitFive" formControlName="digitFive" data-focus-input-init
                                    data-focus-input-prev="digitFour" data-focus-input-next="digitSix"
                                    (keyup)="onKeyUp($event, 'digitFive', 'digitFour', 'digitSix')"
                                    (paste)="onPaste($event)" maxlength="1"
                                    class="w-12 h-12 text-center text-xl font-medium text-black border border-gray-300 focus:ring-2 focus:ring-black focus:border-black  rounded-sm">
                            </div>
                            <div>
                                <label for="digitSix" class="sr-only">Sixth code</label>
                                <input type="text" id="digitSix" formControlName="digitSix" data-focus-input-init
                                    data-focus-input-prev="digitFive" data-focus-input-next="digitSix"
                                    (keyup)="onKeyUp($event, 'digitSix', 'digitFive', null)" (paste)="onPaste($event)"
                                    maxlength="1"
                                    class="w-12 h-12 text-center text-xl font-medium text-black border border-gray-300 focus:ring-2 focus:ring-black focus:border-black  rounded-sm">
                            </div>
                        </div>
                        <p id="helper-text-explanation"
                            class="text-center mx-auto mt-2 text-sm text-gray-500 dark:text-gray-400">Please
                            introduce the 6 digit code we sent via email.</p>
                    </form>

                    <button type="submit"
                        class="w-full text-white bg-black hover:bg-gray-800 focus:outline-none font-medium rounded-sm cursor-pointer text-sm px-5 py-2.5 text-center dark:bg-gray-950 dark:hover:bg-gray-600 transition">
                        Check
                        @if(isLoadingSubmission) {
                        <i class="fa-solid fa-spinner fa-spin fa-spin-reverse ms-1"></i>
                        }
                    </button>
                    @if(errorSubmissionMsg){
                    <div id="alert-border-2"
                        class="flex items-center py-2 rounded-sm text-red-800 bg-red-50 dark:text-red-400 dark:bg-gray-800 dark:border-red-800"
                        role="alert">
                        <div class="ms-2 text-sm">
                            <p>{{errorSubmissionMsg}}</p>
                        </div>
                    </div>
                    }
                    @if(successSubmissionMsg){
                    <div id="alert-border-2"
                        class="flex items-center py-2 rounded-sm text-main-green bg-gray-100 dark:text-main-green dark:bg-gray-800"
                        role="alert">

                        <div class="ms-2 text-sm">
                            <p>{{successSubmissionMsg}}</p>
                        </div>
                    </div>
                    }
                </form>
                }
                @else if (step == 3) {
                <form class="space-y-4" [formGroup]="resetPasswordForm" (ngSubmit)="submitResetPassword()">
                    <div>
                        <label for="email" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Your
                            email</label>
                        <input type="email" name="email" id="email" formControlName="email"
                            class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-sm focus:ring-black focus:border-black block w-full p-2.5 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white"
                            placeholder="name@gmail.com" required />
                    </div>
                    <div>
                        <label for="password" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">New
                            password</label>
                        <input type="password" name="password" id="password" formControlName="newPassword"
                            class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-sm focus:ring-black focus:border-black block w-full p-2.5 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white"
                            required />
                    </div>
                    <button type="submit"
                        class="w-full text-white bg-black hover:bg-gray-800 focus:outline-none font-medium rounded-sm cursor-pointer text-sm px-5 py-2.5 text-center dark:bg-gray-950 dark:hover:bg-gray-600 transition">
                        Reset
                        @if(isLoadingSubmission) {
                        <i class="fa-solid fa-spinner fa-spin fa-spin-reverse ms-1"></i>
                        }
                    </button>
                    @if(errorSubmissionMsg){
                    <div id="alert-border-2"
                        class="flex items-center py-2 rounded-sm text-red-800 bg-red-50 dark:text-red-400 dark:bg-gray-800 dark:border-red-800"
                        role="alert">
                        <div class="ms-2 text-sm">
                            <p>{{errorSubmissionMsg}}</p>
                        </div>
                    </div>
                    }
                    @if(successSubmissionMsg){
                    <div id="alert-border-2"
                        class="flex items-center py-2 rounded-sm text-main-green bg-gray-100 dark:text-main-green dark:bg-gray-800"
                        role="alert">

                        <div class="ms-2 text-sm">
                            <p>{{successSubmissionMsg}}</p>
                        </div>
                    </div>
                    }
                </form>
                }
            </div>
        </div>
    </div>
</div>

}